<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">var plugin = Echo.Plugin.manifest(&quot;ItemConditionalCSSClasses&quot;, &quot;Echo.StreamServer.Controls.Stream.Item&quot;);

plugin.component.renderers.content = function(element) {
	var self = this;
	var item = this.component;
	item.parentRenderer(&quot;content&quot;, arguments);
	var conditions = this.config.get(&quot;conditions&quot;);
	if (!conditions || !conditions.length) return;
	$.map(conditions, function(condition) {
		var value = Echo.Utils.getNestedValue(condition.field, item.data);
		var isCaseInsensitive = self.config.get(&quot;caseInsensitive&quot;) === true;
		if ($.isArray(value)) {
			$.each(value, function(_id, _value) {
				if (self._areEqual(_value, condition.value, isCaseInsensitive)) {
					element.addClass(condition.className);
					return false; // break
				}
			});
		} else if (self._areEqual(condition.value, value, isCaseInsensitive)) {
			element.addClass(condition.className);
		}
	});
	return element;
};

plugin.methods._areEqual = function(string1, string2, isCaseInsensitive) {
	if (isCaseInsensitive) {
		string1 = (string1 || &quot;&quot;).toLowerCase();
		string2 = (string2 || &quot;&quot;).toLowerCase();
	}
	return string1 === string2;
};

Echo.Plugin.create(plugin);
</pre>
</body>
</html>
