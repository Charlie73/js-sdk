<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">(function(jQuery) {

var $ = jQuery;

if ($.fn.echoButton) return;

$.fn.echoButton = function() {
	var args  = arguments;
	return this.each(function(){
		var data = $(this).data(&quot;echoButton&quot;);
		if (!data || typeof args[0] === &quot;object&quot;) {
			$(this).data(&quot;echoButton&quot;, (data = new Button(this, args[0])));
		}
		if (typeof args[0] === &quot;string&quot;) {
			data[args[0]].apply(data, Array.prototype.slice.call(args, 1));
		}
	});
};

var Button = function(element, params) {
	params = params || {};
	this.element = $(element);
	this.element.addClass(&quot;echo-sdk-button&quot;);
	$(&quot;&lt;div&gt;&quot;).appendTo(element).addClass(&quot;echo-label&quot;).css({
		&quot;float&quot;: &quot;left&quot;
	});
	this.update({
		&quot;label&quot;: params.label || this.element.text(),
		&quot;icon&quot;: params.icon || &quot;&quot;,
		&quot;disabled&quot;: params.disabled || !!this.element.attr('disabled')
	});
};

Button.prototype.update = function(params) {
	params = params || {};
	this.label = params.label || &quot;&quot;;
	this.icon = params.icon || &quot;&quot;;
	this.disabled = params.disabled || false;
	this._render();
};

Button.prototype._render = function() {
	$(&quot;.echo-label&quot;, this.element).text(this.label);
	var iconElement = $(&quot;.echo-icon&quot;, this.element);
	var setBackground = function(element, icon) {
		element.css({
			&quot;background&quot; : &quot;no-repeat center url(&quot; + icon + &quot;)&quot;
		});
	};
	if (this.icon) {
		if (!iconElement.length) {
			iconElement = $(&quot;&lt;div&gt;&quot;).addClass(&quot;echo-icon&quot;).prependTo(this.element).css({
				&quot;height&quot;: 16,
				&quot;width&quot;: 16,
				&quot;float&quot;: &quot;left&quot;,
				&quot;margin-right&quot;: 2,
				&quot;margin-top&quot;: 2
			});
		}
		setBackground(iconElement, this.icon);
	} else {
		iconElement.remove();
	}
	this.element.attr(&quot;disabled&quot;, this.disabled);
};

})(Echo.jQuery);
</pre>
</body>
</html>
